<app:TangoEventPageBase
  x:Class="WinPhoneTango.CallHistoryPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:app="clr-namespace:WinPhoneTango"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  FontFamily="{StaticResource TangoFontFamilyNormal}"
  Foreground="{StaticResource TangoForeground}"
  SupportedOrientations="Portrait" Orientation="Portrait"
  mc:Ignorable="d" d:DesignHeight="800" d:DesignWidth="480">

  <app:TangoEventPageBase.Resources>
    <Style x:Key="CallLogListStyle" TargetType="ListView">
      <Setter Property="HorizontalAlignment" Value="Left"/>
      <Setter Property="VerticalAlignment" Value="Top"/>
      <Setter Property="Margin" Value="12,0,12,0"/>
      <Setter Property="Height" Value="550"/>
      <Setter Property="Width" Value="432"/>
      <Setter Property="Background" Value="Transparent"/>
    </Style>

    <DataTemplate x:Key="listItemTemplate">
      <StackPanel Orientation="Horizontal" Height="80" Margin="0,0,0,5">
        <Image Stretch="None" Width="44" Margin="0,9,20,0"
               VerticalAlignment="Top"
               Source="ms-appx:///WinPhoneTango/Resources/call_log_item.png" />
        <StackPanel VerticalAlignment="Top" Orientation="Vertical">
          <TextBlock Text="{Binding Name}" Foreground="{StaticResource TangoForeground}"
                     FontSize="42" />
          <TextBlock Text="{Binding LastCallText}" Foreground="{Binding LastCallColor}"
                     Margin="0,-8,0,0" FontSize="20"/>
        </StackPanel>
      </StackPanel>
    </DataTemplate>
  </app:TangoEventPageBase.Resources>

  <!--LayoutRoot is the root grid where all page content is placed-->
  <Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="0,0,-20">
      <StackPanel Orientation="Horizontal">
        <Image Source="ms-appx:///WinPhoneTango/Resources/logo_small.png" HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="None"></Image>
        <Rectangle Width="480" Fill="{StaticResource TangoOrangeBrush}" HorizontalAlignment="Left" VerticalAlignment="Stretch"></Rectangle>
      </StackPanel>
      <TextBlock Text="{Binding Localizedresources.call_history_title, Source={StaticResource LocalizedStrings}}"
                 x:Name="PageTitle" Style="{StaticResource TangoTitleStyle}"
                 HorizontalAlignment="Left" VerticalAlignment="Top" />
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Pivot x:Name="pivotCallLog" Title="" Grid.Row="1" SelectionChanged="Pivot_SelectionChanged">
      <!--Pivot item all contacts-->
      <PivotItem Header="{Binding Localizedresources.all_call_title, Source={StaticResource LocalizedStrings}}">
        <Grid>
          <ListView x:Name="listSelectorAll"
                    Style="{StaticResource CallLogListStyle}"
                    ItemTemplate="{StaticResource listItemTemplate}"
                    SelectionChanged="listSelectorAll_SelectionChanged" />
          <TextBlock Text="{Binding Localizedresources.call_log_no_calls_msg, Source={StaticResource LocalizedStrings}}"
                     x:Name="noCallText" FontSize="24" Visibility="Collapsed" />
        </Grid>
      </PivotItem>

      <!--Pivot item tango contacts-->
      <PivotItem Header="{Binding Localizedresources.missed_call_title, Source={StaticResource LocalizedStrings}}">
        <Grid>
          <ListView x:Name="listSelectorMissed"
                    Style="{StaticResource CallLogListStyle}"
                    ItemTemplate="{StaticResource listItemTemplate}"
                    SelectionChanged="listSelectorMissed_SelectionChanged" />
          <TextBlock Text="{Binding Localizedresources.call_log_no_missed_calls_msg, Source={StaticResource LocalizedStrings}}"
                     x:Name="noMissedCallText" FontSize="24" Visibility="Collapsed" />
        </Grid>
      </PivotItem>
    </Pivot>
    <ProgressBar Grid.Row="1" Height="8" HorizontalAlignment="Left"
                 Margin="10,20,0,0" Name="waitingBar"
                 VerticalAlignment="Top" Width="454"
                 IsIndeterminate="True" Visibility="Collapsed" />
  </Grid>
</app:TangoEventPageBase>
